# Copilot Instructions for blueHubCloud

## Project Overview

- **Monorepo**: Laravel 11 (PHP backend) + Vue 3 (TypeScript, Vite) dashboard frontend.
- **Backend**: All business logic, data, and integrations live in `app/` (services, jobs, models, controllers). API routes in `routes/api.php`.
- **Frontend**: SPA in `dashboard/` using Vue 3 SFCs, TypeScript, and Vite. Auth and API calls use `VITE_API_BASE_URL`.

## Key Workflows

- **Build frontend**: `npm run build` in `dashboard/` or use the `vite build` VS Code task.
- **Run dev frontend**: `npm run dev` in `dashboard/` (uses `.env` for API URL).
- **Backend migrations**: Use `php artisan migrate` (VS Code task: `artisan migrate`).
- **Seed admin user**: Use `php artisan db:seed --class=AdminUserSeeder` (VS Code task: `seed admin user`).
- **Composer autoload**: Run `composer dump-autoload` after adding classes.

## Architectural Patterns

- **Service Layer**: Business logic is in `app/Services/`. Example: `ReportGeneratorService.php` for report exports.
- **Jobs**: Asynchronous work in `app/Jobs/` (e.g., `GenerateWeeklyPbxReportsJob.php`).
- **AWS Integration**: Secrets and config (e.g., PBX credentials) are centralized in AWS Secrets Manager, not in code.
- **API Auth**: Custom middleware in `app/Http/Middleware/` (e.g., `ApiKeyAuth`).
- **Frontend Auth**: Minimal token-based auth in `dashboard/src/composables/useAuth.ts`.
- **UI Patterns**: Use `Card`, `PageHeader`, and `BaseButton` components for layout consistency. See `dashboard/src/components/ui/`.

## Conventions & Tips

- **Frontend**: Use `<script setup lang="ts">` in Vue SFCs. Use composables for state. API calls in `dashboard/src/api/`.
- **Backend**: Use service classes for business logic, not controllers. Jobs should be idempotent.
- **Env config**: Set `VITE_API_BASE_URL` in `dashboard/.env` for local dev.
- **Testing**: Use PHPUnit for backend. No custom test runner for frontend.
- **Deprecated commands**: Some artisan commands are intentionally stubbed (see `PbxUpdateEndpoints`).

## Integration Points

- **Reports**: Generated by backend jobs, stored on disk/S3 (see `config/services.php`).
- **PBXware**: External telephony integration, credentials via AWS Secrets Manager.

## Examples

- **Add a new report type**: Create a service in `app/Services/`, a job in `app/Jobs/`, and expose via API route.
- **Add a dashboard view**: Add a Vue SFC to `dashboard/src/views/`, register in `src/router`.

## References

- [dashboard/README.md](../dashboard/README.md) for frontend setup
- [config/services.php](../config/services.php) for integration config
- [app/Services/](../app/Services/) for business logic patterns

---

For more, see the Laravel and Vue docs. When in doubt, follow the structure of existing files.
